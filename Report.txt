---
output:
  word_document: default
  html_document: default
  pdf_document: default
---
## Ask
The purpose of this analysis is to gain insights into consumer behavior and usage patterns of non-Bellabeat smart devices. By examining usage data from various smart devices, I aim to identify trends and key factors that influence user engagement and satisfaction. This analysis will provide actionable insights for Bellabeat to better understand the competitive landscape, inform product development strategies, and enhance marketing efforts to effectively position Bellabeat’s offerings in the market.

### 1.2 Questions for analysis

    What are some trends in smart device usage?

    How could these trends apply to Bellabeat customers?

    How could these trends help influence Bellabeat marketing strategy?

### 1.3 Stakeholders

    Urška Sršen: Bellabeat’s cofounder and Chief Creative Officer

    Sando Mur: Mathematician and Bellabeat’s cofounder; key member of the Bellabeat executive team

    Bellabeat marketing analytics team: A team of data analysts responsible for collecting, analyzing, and reporting data that helps guide Bellabeat’s marketing strategy.
    
## Prepare

### 2.1 Dataset used

I'll be using the FitBit Fitness Tracker Data provided by Mobius on Kaggle.

### 2.2 Accessibility & Privacy

The licensing of this dataset confirms that it is open source and that the author has dedicated this dataset to the public domain. You can copy, modify, distribute and perform the work, even for commercial purposes, without asking for permission.

### 2.3 Information on dataset

This dataset is generated by respondents to a distributed survey via Amazon Mechanical Turk between 3.12.2016 - 5.12.2016. 30 eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring. We will be looking at the 4.12.16-5.12.16 timeframe in particular.

### 2.4. Data Organization

Available are 29 .CSV documents. Each document the data is arranged in long format form with the rows containing one time point per subject. Therefore, one subject can have multiple rows of data, each containing a unique ID to the user, along with different day and time.

### 2.5. Data Credibility & Integrity

Since there are only 30 eligible Fitbit users included in these datasets, the sample size is very small and no further information is given on each subject. Therefore, there are certain unknown variables in this analysis, such as the age, height, weight, and activity level of each subject. As these will play a crucial role in determining whether the activity level is appropriate and proportional to the size of the individual. As present, sampling bias might be a factor in this case.

## Process

### 3.1 Check the data for errors

After searching through websites and commentary on the Kaggle page for 'FitBit Fitness Tracker Data' I was able to find a PDF of a data dictionary that related to the data sets used.

A first scan of the data sets doesn't reveal any errors like wrong entry. Any faulty entry such as mixing user ids cannot be detected as there is no raw material in hand to compare. 

### 3.2 Cleaning the data

We first install the necessary libraries

```{r}
install.packages("tidyverse")
library(tidyverse)
install.packages("ggpubr")
library(ggpubr)
install.packages("janitor")
library(janitor)
install.packages("ggrepel")
library(ggrepel)
install.packages("dplyr")
library(dplyr)
install.packages("tidyr")
library(tidyr)
install.packages("ggplot2")
library(ggplot2)
```

**Importing Datasets**


```{r}
daily_activity <- read.csv("dailyActivity_merged.csv")
hourly_calories <- read.csv("hourlyCalories_merged.csv")
hourly_intensity <- read.csv("hourlyIntensities_merged.csv")
hourly_steps <- read.csv("hourlySteps_merged.csv")
weight <- read.csv("weightLogInfo_merged.csv")

```

**Previewing data**
```{r}
head(daily_activity)
head(hourly_calories)
head(hourly_intensity)
head(hourly_steps)
head(weight)
```



3.4 Clean the data

Clean the column names so they're all lowercase and unify the date and time column names for when we later format the date.

```{r}


daily_activity <- daily_activity %>%
  rename(date = ActivityDate) %>%
  clean_names()

hourly_calories <- hourly_calories %>%
  rename(date_time = ActivityHour) %>%
  clean_names()

hourly_intensity <- hourly_intensity %>%
  rename(date_time = ActivityHour) %>%
  clean_names()

hourly_steps <- hourly_steps %>%
  rename(date_time = ActivityHour) %>%
  rename(total_steps = StepTotal) %>%
  clean_names()


```


**Count the number of participants**

Counting the number of IDs will give us the count of the participants for each dataframe.

```{r}
n_distinct(daily_activity$id)
n_distinct(hourly_calories$id)
n_distinct(hourly_intensity$id)
n_distinct(hourly_steps$id)
n_distinct(weight$Id)
```
As we see, the number of unique ids doesn't match the number of users surveyed. Two potential reasons:
- User switched device
- Faulty entry in the data set

We cannot clean this issue as we don't have the original data to compare to and we don't have an information whether some users changes their devices or settings.

Only 11 users reported their weight log. We can already assume this is a weak sample to analyze.


**Check for duplicates**

```{r}


sum(duplicated(daily_activity))
sum(duplicated(hourly_calories))
sum(duplicated(hourly_intensity))
sum(duplicated(hourly_steps))
sum(duplicated(weight))


```
Luckily, we don't have any duplicates.

**Adjust format**

Adjust the date format so that there are no inconsistencies. Then separate the date and time of the hourly dataframes into separate columns so we can use it for visualization.

```{r}
# Format date
daily_activity$date <- as.Date(daily_activity$date, format = "%m/%d/%Y")

# Format date time
hourly_calories$date_time = as.POSIXct(hourly_calories$date_time, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
hourly_calories$date <- format(hourly_calories$date_time, format = "%m/%d/%y")
hourly_calories$time <- format(hourly_calories$date_time, format = "%H:%M:%S")


hourly_intensity$date_time = as.POSIXct(hourly_intensity$date_time, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
hourly_intensity$date <- format(hourly_intensity$date_time, format = "%m/%d/%y")
hourly_intensity$time <- format(hourly_intensity$date_time, format = "%H:%M:%S")

hourly_steps$date_time = as.POSIXct(hourly_steps$date_time, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
hourly_steps$date <- format(hourly_steps$date_time, format = "%m/%d/%y")
hourly_steps$time <- format(hourly_steps$date_time, format = "%H:%M:%S")
```


## Analyze

```{r}
head(daily_activity)
summary(select(daily_activity, -id, -date))
```
[CDC](https://www.medicalnewstoday.com/articles/how-many-steps-should-you-take-a-day) recommeds 10000 steps per day for adults. Yet, we see that the average daily steps are way below that at 6547 steps. This is an indication that the majority of people surveyed don't live an active lifestyle. 

This is also noticeable in the summary of sedentary_minutes where at least 85% of people are resting more than 12 sedentary hours. If we exclude 8 hours of sleep, that means at least 4 hours of sitting or laying down
According to the charity Just Stand, the following thresholds determine a person's risk of developing health problems due to sitting: Low risk: Sitting for less than 4 hours per day. Medium risk: Sitting for 4–8 hours per day. High risk: Sitting for 8–11 hours per day. 

The majority of our sample is classified in either medium or high risk.


This observation prompts further inquiry into the frequency of individuals' walking habits throughout the day and at which times they exert the most intensity. Understanding these patterns can provide valuable insights into how users engage with physical activity and inform strategies to promote healthier lifestyles.


**Hourly Steps and Intensity Over Time**

```{r}
steps_over_time <- hourly_steps %>%
  group_by(time) %>%
  drop_na() %>%
  summarize(mean_total_steps = mean(total_steps))

ggplot(data=steps_over_time, aes(x=time, y=mean_total_steps)) + geom_histogram(stat = "identity", fill='darkblue') +
  theme(axis.text.x = element_text(angle = 90)) +
  labs(title="Average Total Steps Over Time")

intensity_over_time <- hourly_intensity %>%
  group_by(time) %>%
  drop_na() %>%
  summarize(mean_total_intensity = mean(total_intensity))

ggplot(data=intensity_over_time, aes(x=time, y=mean_total_intensity)) + geom_histogram(stat = "identity", fill='darkblue') +
  theme(axis.text.x = element_text(angle = 90)) +
  labs(title="Average Total Intensity Over Time")
```

The hourly steps and intensity data exhibit a striking similarity, suggesting a strong correlation between the number of steps taken and the intensity of physical activity. This observation leads to the conclusion that as individuals accumulate a higher number of steps throughout the day, they also tend to engage in activities of higher intensity.

Furthermore, the data reveals a noteworthy trend: the peak in both steps and intensity occurs consistently between the hours of 5-7pm. This insight presents an opportunity for further investigation into the factors driving activity levels during this particular timeframe.

Understanding these dynamics could empower individuals to make informed decisions about their lifestyle habits and support them in achieving optimal health outcomes.

There is also an important note that there are two main peaks in hourly steps which is at 12pm and at 6pm. These two hours seem to be a good time for users to move more or maybe a strong reason to do so: lunch time and shift end. User miay need to walk to the restaurant, do some post-lunch jogging to digest and later in the evening, they might tend to have a way to walk more back home ro to the gym as we notice an intensity increase in both hours.

** Comparison of Activity Levels with Calories Burned**

```{r}
#Combine all of the active minutes 
daily_activity$total_active_minutes <- daily_activity$very_active_minutes + daily_activity$fairly_active_minutes + daily_activity$lightly_active_minutes

ggplot(data=daily_activity, aes(x=total_active_minutes, y=calories)) +
  geom_point() + geom_smooth() + labs(title = "Total active minutes vs. Calories")

ggplot(data=daily_activity, aes(x=sedentary_minutes, y=calories)) +
  geom_point() + geom_smooth() + labs(title = "Sedentary minutes vs. Calories")
```



As expected, the analysis reveals a positive correlation between active minutes and calories burned. This finding underscores the intuitive connection between physical activity levels and energy expenditure, indicating that individuals who engage in more active minutes are likely to burn a greater number of calories.

## Share and Act

Recommendations:

* Guided Evening Workouts: Introduce guided workout sessions or routines tailored to the evening hours, accessible through the Bellabeat app or compatible devices. These workouts could include quick and effective exercises designed to fit into busy evening schedules.

* Motivational Features: Implement features that motivate users to increase their daily activity levels. This could involve setting personalized activity goals based on individual fitness levels and providing rewards or incentives for reaching milestones. Additionally, integrating social sharing capabilities could allow users to compete with friends and share achievements.

* Consider the typical day structure: the app content from workouts to tips should consider the daily habit of the majority of adults. We can use the information that users tend to be more active after lunchtime and after workday to provide workout programs fitting their lifestyle. This will ease the use of the app during their daily tasks and they will feel that it is more accustomed to their needs. 

By leveraging data analytics and innovative product features, Bellabeat has the opportunity to position itself as a leader in the global smart device market, offering users personalized solutions for tracking activity, improving sleep quality, and optimizing calorie burning. As the company continues to innovate and expand its product offerings, it has the potential to make a significant impact on the lives of its users, helping them achieve their health and wellness goals and live happier, healthier lives.
